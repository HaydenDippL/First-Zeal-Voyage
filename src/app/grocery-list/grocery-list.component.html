<div class="fullscreen">
    <div class="centered">
        <div class="card">
            <div class="centered vbox">
                <h1 [style]="{marginBottom: '2vh'}">Todo List</h1>
                <label for="search">Search</label>
                <input 
                    pInputText 
                    id="search" 
                    aria-describedby="search-help"
                    [(ngModel)]="query" />
                <small id="search-help">
                    Search for groceries or the names of those responsible to pick them up.
                </small>
                <p-dropdown 
                    [style]="{marginBottom: '4vh'}"
                    [options]="due_options" 
                    [(ngModel)]="due_filter"
                    [checkmark]="true" 
                    [showClear]="true"
                    placeholder="Due Filter"
                />
                <p-multiSelect 
                    [style]="{marginBottom: '4vh'}"
                    [options]="this.grocery_list_service.get_tag_options()" 
                    [(ngModel)]="tag_filters" 
                    display="chip" 
                    [showClear]="true"
                    placeholder="Filter Tags" 
                />
                <p-dropdown 
                    [options]="sort_options" 
                    [(ngModel)]="sort_selected" 
                    [checkmark]="true" 
                    [showClear]="true"
                    placeholder="Sort"
                />
                <p-button 
                    label="Add Grocery"
                    (onClick)="toggle_create_menu()"
                />
                <div *ngFor="let grocery of search_filter_sort()">
                    <ng-template #grocery_template let-grocery="grocery">
                        <app-grocery-item [grocery]="grocery"/>
                    </ng-template>
                    <ng-template #actions_template let-grocery="grocery">
                        <app-action-buttons [grocery]="grocery" [post_date]="grocery.date"/>
                    </ng-template>

                    <div class="hbox">
                        <ng-container *ngTemplateOutlet="grocery_template; context: {grocery: grocery}"/>
                        <ng-container *ngTemplateOutlet="actions_template; context: {grocery: grocery}"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<app-edit-creation-popup
    [visible]="create_menu_visible"
    [mode]="'create'"
    (exit)="toggle_create_menu()"
/>